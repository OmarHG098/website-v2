---
alwaysApply: true
---
## üìã 2. PROJECT CODING STANDARDS

### 2.1 Configuration-First Development
**PRINCIPLE:** Always prefer YAML configuration over hardcoded values

```javascript
// BAD: Hardcoded values
const monthlyLabel = "$349 a month or less";
const applyLink = "/us/apply";

// GOOD: YAML configuration
{getJobGuaranteeConfig(currentLocation, info)?.monthly_label}
{getRegionalCTA(session, info)?.apply_link}
```

### 2.1.1 YAML + GraphQL Workflow (CRITICAL)
**MANDATORY PROCESS:** Every time you add a new field to YAML files, you MUST update the corresponding GraphQL query.

**STEP-BY-STEP PROCESS:**
1. **üìã Plan:** Identify what YAML fields need to be added
2. **üèóÔ∏è YAML First:** Update both `.us.yml` and `.es.yml` files
3. **üîç GraphQL:** **MANDATORY** - Update GraphQL query to include new fields
4. **‚öõÔ∏è Component:** Update React component to use new fields
5. **üß™ Test:** Run `npm run test` after each step

**EXAMPLE WORKFLOW:**
```javascript
// 1. YAML files updated
// prices_and_payment.us.yml
other_payment_options: "Other payment options"

// prices_and_payment.es.yml  
other_payment_options: "Otras opciones de pago"

// 2. GraphQL query updated (MANDATORY)
const data = useStaticQuery(graphql`
  query PricesAndPayment {
    content: allPricesAndPaymentYaml {
      edges {
        node {
          fields { lang }
          we_accept
          other_payment_options  // ‚úÖ NEW FIELD ADDED
          top_label
        }
      }
    }
  }
`);

// 3. Component uses field
{info.other_payment_options} // ‚úÖ WORKS
```

**COMMON GRAPHQL QUERY LOCATIONS:**
```bash
# Search for GraphQL queries
grep -r "useStaticQuery\|graphql\`" src/components/

# Common patterns:
# - useStaticQuery(graphql`query ComponentName`)
# - allPricesAndPaymentYaml
# - allPlansYaml
# - allLocationsYaml
```

### 2.2 Commit Message Standards
**FORMAT:** `PREFIX: Description (max 50 chars)`

**PREFIXES:**
- `ADD:` - New features, components, or files
- `UPDATE:` - Modifications to existing code/content  
- `FIX:` - Bug fixes and corrections
- `REMOVE:` - Deletions or cleanup

**EXAMPLES:**
```bash
‚úÖ ADD: Regional job guarantee structure support
‚úÖ UPDATE: Job guarantee locations per regions  
‚úÖ FIX: Mobile dropdowns closing on toggle
‚úÖ REMOVE: Obsolete payment method configs
```

### 2.3 Component Architecture Patterns
**FOLLOW:** Established patterns like `AdmissionsStaff` component

```javascript
// Standard pattern for location-based filtering
const filterByLocation = (item) => {
  const candidates = [
    session?.location?.breathecode_location_slug,
    session?.location?.meta_info?.slug, 
    session?.location?.active_campaign_location_slug,
  ].filter((s) => typeof s === "string" && s.length > 0);
  
  for (const locationSlug of candidates) {
    if (item.locations.includes(locationSlug) || item.locations.includes("all")) {
      return true;
    }
  }
  return false;
};
```

### 2.4 Testing Requirements
**MANDATORY:** Test after each step, especially YAML/GraphQL changes

```bash
# Always run before committing
npm run test

# Test specific areas after changes
npm run test:yaml    # For YAML modifications
npm run test:seo     # For meta/SEO changes
npm run test:plans   # For pricing plan changes
```

---

## üåç 3. SCALABILITY RULES

### 3.1 Regional Design Patterns
**STRUCTURE:** Use academy-based arrays for all regional configurations

```yaml
# SCALABLE: Academy-based regional configuration
job_guarantee:
  - slug: usa_academies
    academies: ['atlanta-usa', 'chicago-usa', 'houston-usa']
    monthly_label: "$349 a month or less"
  - slug: latam_academies  
    academies: ['bogota-colombia', 'lima-peru']
    monthly_label: "Desde $349 USD al mes"
  - slug: europe_academies
    academies: ['madrid-spain', 'barcelona-spain']
    monthly_label: "Desde ‚Ç¨299 al mes"
```

### 3.2 Currency & Messaging Support
**PLAN FOR:** Different currencies, legal requirements, and cultural messaging

```yaml
# Multi-regional pricing examples
price: "‚Ç¨4,750*"           # Europe (Euro)
price: "$13,499"           # USA (USD)
price: "3.040.000 CLP"     # Chile (Chilean Peso)
price: "USD $3.600"        # LATAM (USD but explicit)
```

### 3.3 Regulatory Considerations
**LOCATIONS WITH SPECIAL RULES:**
- **Europe:** GDPR compliance, VAT considerations
- **Chile:** Local currency, different job guarantee rules
- **USA:** State-specific regulations in some locations
- **LATAM:** Mixed USD/local currency preferences

### 3.4 Future Market Expansion
**DESIGN FOR:** Easy addition of new countries/regions

```javascript
// Expandable helper function
const getRegionalConfig = (location, configType) => {
  const regionMappings = {
    'usa': ['atlanta-usa', 'chicago-usa', 'houston-usa'],
    'latam': ['bogota-colombia', 'lima-peru', 'quito-ecuador'],
    'europe': ['madrid-spain', 'barcelona-spain'],
    'asia': [], // Future expansion ready
  };
  // Implementation...
};
```

---

## üìÅ 4. PROJECT CONVENTIONS

### 4.1 File Naming & Structure
**REQUIRED:** Consistent naming across all content files

```
‚úÖ CORRECT NAMING:
src/data/components/prices_and_payment/
‚îú‚îÄ‚îÄ prices_and_payment.us.yml
‚îî‚îÄ‚îÄ prices_and_payment.es.yml

src/data/plans/
‚îú‚îÄ‚îÄ full-stack.us.yml
‚îú‚îÄ‚îÄ full-stack.es.yml
‚îú‚îÄ‚îÄ cybersecurity.us.yml 
‚îî‚îÄ‚îÄ cybersecurity.es.yml
```

### 4.2 Language File Synchronization
**CRITICAL:** Always update both `.us.yml` and `.es.yml` files

```yaml
# When adding new feature, update BOTH files:

# prices_and_payment.us.yml
new_feature:
  title: "New Feature"
  description: "Feature description"

# prices_and_payment.es.yml  
new_feature:
  title: "Nueva Caracter√≠stica"
  description: "Descripci√≥n de la caracter√≠stica"
```

### 4.3 Component Organization
**STANDARD:** Each component in its own folder with `index.js`

```
src/components/PricesAndPayment/
‚îî‚îÄ‚îÄ index.js  ‚úÖ

src/components/AdmissionsStaff/
‚îî‚îÄ‚îÄ index.js  ‚úÖ

‚ùå AVOID:
src/components/PricesAndPayment.js
src/components/PricesAndPayment/PricesAndPayment.js
```

### 4.4 GraphQL Query Patterns
**PATTERN:** Use descriptive query names and consistent structure

```javascript
const data = useStaticQuery(graphql`
  query PricesAndPaymentQuery {  // Descriptive name
    content: allPricesAndPaymentYaml {
      edges {
        node {
          fields { lang }
          // List all needed fields explicitly
          job_guarantee_locations
          job_guarantee {
            slug
            academies
            title
            monthly_label
          }
        }
      }
    }
  }
`);
```

---

## üéì 5. 4GEEKSACADEMY CONTEXT

### 5.1 Business Model Understanding
**GLOBAL PRESENCE:** International coding bootcamp with 20+ locations
- **USA:** Atlanta, Austin, Chicago, Dallas, Houston, LA, NYC, Miami, Orlando, Tampa, Toronto
- **LATAM:** Buenos Aires, Bogot√°, Caracas, Costa Rica, La Paz, Lima, Mexico City, Montevideo, Panama, Quito  
- **EUROPE:** Madrid, Barcelona, Valencia, M√°laga, Berlin, Dublin, Hamburg, Munich, Lisbon, Milan, Rome

### 5.2 Pricing Strategy Variations
**DIFFERENT MODELS BY REGION:**

```yaml
# USA: Higher prices, job guarantee available
price: "$13,499"
job_guarantee_description: "Regular tuition is $12,999..."

# LATAM: USD pricing, different financing
price: "USD $3.600" 
financing: "Financing available"

# Europe: Euro pricing, different regulations
price: "‚Ç¨4,750*"
financing: "SEPA financing available"
```

### 5.3 Job Guarantee Program
**AVAILABILITY VARIES:** Not all locations offer job guarantee

```yaml
# Job guarantee enabled locations
job_guarantee_locations: [
  "atlanta-usa", "austin-usa", "chicago-usa", "dallas-usa",
  "houston-usa", "losangeles-usa", "newyork-usa", "toronto-canada",
  "buenosaires-argentina", "bogota-colombia", "caracas-venezuela",
  "costa-rica", "lapaz-bolivia", "lima-peru", "mexicocity-mexico",
  "montevideo-uruguay", "panamacity-panama", "quito-ecuador"
]
# NOTE: Chile and Europe excluded due to local regulations
```

### 5.4 Mobile-First Design
**PRIORITY:** Mobile experience is critical (60%+ mobile traffic)

```javascript
// Always consider mobile-first responsive design
<Div
  display="none"           // Hidden on mobile
  display_md="block"       // Shown on desktop
>
  Desktop content
</Div>

<Div
  display="block"          // Shown on mobile  
  display_md="none"        // Hidden on desktop
>
  Mobile content
</Div>
```

### 5.5 Multilingual Requirements
**SUPPORTED LANGUAGES:**
- **English (US):** Primary language for US/Canada markets
- **Spanish (ES):** Primary language for LATAM/Spain markets

**TRANSLATION GUIDELINES:**
- Maintain technical accuracy across languages
- Use informal tone ("t√∫" form in Spanish)
- Preserve component structure between languages
- Keep marketing messages culturally appropriate

---

## üîß 6. DEVELOPMENT WORKFLOW

### 6.1 Step-by-Step Process
1. **üìã Plan:** Break complex changes into small steps
2. **üèóÔ∏è YAML First:** Update configuration files  
3. **üîç GraphQL:** Update queries to match new YAML structure
4. **‚öõÔ∏è Component:** Update React component logic
5. **üß™ Test:** Run `npm run test` after each step
6. **üìù Commit:** Small, focused commits with clear messages
7. **üîÑ Iterate:** Repeat until feature is complete

### 6.2 Code Review Checklist
- [ ] Both `.us.yml` and `.es.yml` files updated
- [ ] **GraphQL queries include all new YAML fields** ‚ö†Ô∏è CRITICAL
- [ ] Component logic handles undefined/null values gracefully
- [ ] Regional filtering uses selected academy, not visitor origin
- [ ] All tests pass (`npm run test`)
- [ ] Commit messages follow project standards
- [ ] Mobile and desktop rendering tested
- [ ] **GraphQL query compilation successful** ‚ö†Ô∏è NEW

### 6.3 Debugging Guide
**COMMON DEBUG POINTS:**
1. **Data not appearing:** Check GraphQL query includes the field
2. **Regional logic broken:** Verify academy-based filtering
3. **Spanish page errors:** Check both language files have matching keys
4. **Toggle not working:** Ensure state variables are passed to child components

### 6.4 GraphQL Debugging 
**COMMON GRAPHQL PROBLEMS:**
1. **Field undefined:** Check GraphQL query includes the field
2. **Type mismatch:** Ensure YAML structure matches GraphQL expectations
3. **Query compilation fails:** Check field name spelling and syntax
4. **Data not loading:** Verify both .us.yml and .es.yml have the field

**DEBUG COMMANDS:**
```bash
# Test GraphQL query compilation
npm run develop

# Check GraphQL schema
# Visit http://localhost:8000/___graphql

# Test specific query
query {
  allPricesAndPaymentYaml {
    edges {
      node {
        other_payment_options  # Test if field exists
      }
    }
  }
}
```

---

## üöÄ 7. PERFORMANCE & OPTIMIZATION

### 7.1 GraphQL Optimization
**ONLY FETCH NEEDED DATA:** Don't request unused fields

```javascript
// BAD: Fetching everything
allPlansYaml {
  edges {
    node {
      full_time  // Fetches all fields
    }
  }
}

// GOOD: Explicit field selection
allPlansYaml {
  edges {
    node {
      full_time {
        slug
        academies  
        description
        price
        // Only what you need
      }
    }
  }
}
```

### 7.2 Component Rendering
**AVOID:** Unnecessary re-renders and complex calculations in render

```javascript
// BAD: Complex calculation in render
{availablePlans.filter(plan => 
  plan.academies.includes(location) && plan.price > 0
).map(plan => ...)}

// GOOD: Pre-calculate in useEffect
useEffect(() => {
  const filtered = availablePlans.filter(plan => 
    plan.academies.includes(currentLocation) && plan.price > 0
  );
  setFilteredPlans(filtered);
}, [availablePlans, currentLocation]);
```

---

## üìö 8. RESOURCES & REFERENCES

### 8.1 Key Files to Study
- `src/components/AdmissionsStaff/index.js` - Location filtering pattern
- `src/components/PricesAndPayment/index.js` - Complex regional logic
- `src/data/components/prices_and_payment/` - Regional YAML structure
- `src/test/` - Testing patterns and validation

### 8.2 External Dependencies
- **Gatsby:** Static site generation and GraphQL
- **React:** Component framework
- **Styled Components:** CSS-in-JS styling
- **React Select:** Dropdown components

### 8.3 Testing Commands
```bash
npm run test              # Full test suite
npm run develop          # Development server
npm run build            # Production build
npm run serve            # Serve built site
```

---

## ‚ö†Ô∏è 9. CRITICAL REMINDERS

1. **ALWAYS** update both `.us.yml` and `.es.yml` files
2. **MANDATORY** update GraphQL queries when adding YAML fields
3. **NEVER** forget to update GraphQL queries when adding YAML keys
4. **TEST** thoroughly after YAML or GraphQL changes
5. **USE** selected academy for regional logic, not visitor origin
6. **FOLLOW** commit message conventions (PREFIX: Description)
7. **MAINTAIN** mobile-first responsive design
8. **CONSIDER** all regions when adding new features
9. **VALIDATE** with `npm run test` before committing

---

**üéØ Remember:** This is an international project serving students worldwide. Every change should work seamlessly across all regions, languages, and devices. When in doubt, follow established patterns and test thoroughly.

**üìñ Version History:**
- v1.0 (2024): Initial project patterns
- v2.0 (2025): Regional refactoring and comprehensive guide