---
alwaysApply: true
---
## üìã 2. PROJECT CODING STANDARDS

### 2.1 Configuration-First Development
**PRINCIPLE:** Always prefer YAML configuration over hardcoded values

```javascript
// BAD: Hardcoded values
const monthlyLabel = "$349 a month or less";
const applyLink = "/us/apply";

// GOOD: YAML configuration
{getJobGuaranteeConfig(currentLocation, info)?.monthly_label}
{getRegionalCTA(session, info)?.apply_link}
```

### 2.2 Commit Message Standards
**FORMAT:** `PREFIX: Description (max 50 chars)`

**PREFIXES:**
- `ADD:` - New features, components, or files
- `UPDATE:` - Modifications to existing code/content  
- `FIX:` - Bug fixes and corrections
- `REMOVE:` - Deletions or cleanup

**EXAMPLES:**
```bash
‚úÖ ADD: Regional job guarantee structure support
‚úÖ UPDATE: Job guarantee locations per regions  
‚úÖ FIX: Mobile dropdowns closing on toggle
‚úÖ REMOVE: Obsolete payment method configs
```

### 2.3 Component Architecture Patterns
**FOLLOW:** Established patterns like `AdmissionsStaff` component

```javascript
// Standard pattern for location-based filtering
const filterByLocation = (item) => {
  const candidates = [
    session?.location?.breathecode_location_slug,
    session?.location?.meta_info?.slug, 
    session?.location?.active_campaign_location_slug,
  ].filter((s) => typeof s === "string" && s.length > 0);
  
  for (const locationSlug of candidates) {
    if (item.locations.includes(locationSlug) || item.locations.includes("all")) {
      return true;
    }
  }
  return false;
};
```

### 2.4 Testing Requirements
**MANDATORY:** Test after each step, especially YAML/GraphQL changes

```bash
# Always run before committing
npm run test

# Test specific areas after changes
npm run test:yaml    # For YAML modifications
npm run test:seo     # For meta/SEO changes
npm run test:plans   # For pricing plan changes
```

---

## üåç 3. SCALABILITY RULES

### 3.1 Regional Design Patterns
**STRUCTURE:** Use academy-based arrays for all regional configurations

```yaml
# SCALABLE: Academy-based regional configuration
job_guarantee:
  - slug: usa_academies
    academies: ['atlanta-usa', 'chicago-usa', 'houston-usa']
    monthly_label: "$349 a month or less"
  - slug: latam_academies  
    academies: ['bogota-colombia', 'lima-peru']
    monthly_label: "Desde $349 USD al mes"
  - slug: europe_academies
    academies: ['madrid-spain', 'barcelona-spain']
    monthly_label: "Desde ‚Ç¨299 al mes"
```

### 3.2 Currency & Messaging Support
**PLAN FOR:** Different currencies, legal requirements, and cultural messaging

```yaml
# Multi-regional pricing examples
price: "‚Ç¨4,750*"           # Europe (Euro)
price: "$13,499"           # USA (USD)
price: "3.040.000 CLP"     # Chile (Chilean Peso)
price: "USD $3.600"        # LATAM (USD but explicit)
```

### 3.3 Regulatory Considerations
**LOCATIONS WITH SPECIAL RULES:**
- **Europe:** GDPR compliance, VAT considerations
- **Chile:** Local currency, different job guarantee rules
- **USA:** State-specific regulations in some locations
- **LATAM:** Mixed USD/local currency preferences

### 3.4 Future Market Expansion
**DESIGN FOR:** Easy addition of new countries/regions

```javascript
// Expandable helper function
const getRegionalConfig = (location, configType) => {
  const regionMappings = {
    'usa': ['atlanta-usa', 'chicago-usa', 'houston-usa'],
    'latam': ['bogota-colombia', 'lima-peru', 'quito-ecuador'],
    'europe': ['madrid-spain', 'barcelona-spain'],
    'asia': [], // Future expansion ready
  };
  // Implementation...
};
```

---

## üìÅ 4. PROJECT CONVENTIONS

### 4.1 File Naming & Structure
**REQUIRED:** Consistent naming across all content files

```
‚úÖ CORRECT NAMING:
src/data/components/prices_and_payment/
‚îú‚îÄ‚îÄ prices_and_payment.us.yml
‚îî‚îÄ‚îÄ prices_and_payment.es.yml

src/data/plans/
‚îú‚îÄ‚îÄ full-stack.us.yml
‚îú‚îÄ‚îÄ full-stack.es.yml
‚îú‚îÄ‚îÄ cybersecurity.us.yml 
‚îî‚îÄ‚îÄ cybersecurity.es.yml
```

### 4.2 Language File Synchronization
**CRITICAL:** Always update both `.us.yml` and `.es.yml` files

```yaml
# When adding new feature, update BOTH files:

# prices_and_payment.us.yml
new_feature:
  title: "New Feature"
  description: "Feature description"

# prices_and_payment.es.yml  
new_feature:
  title: "Nueva Caracter√≠stica"
  description: "Descripci√≥n de la caracter√≠stica"
```

### 4.3 Component Organization
**STANDARD:** Each component in its own folder with `index.js`

```
src/components/PricesAndPayment/
‚îî‚îÄ‚îÄ index.js  ‚úÖ

src/components/AdmissionsStaff/
‚îî‚îÄ‚îÄ index.js  ‚úÖ

‚ùå AVOID:
src/components/PricesAndPayment.js
src/components/PricesAndPayment/PricesAndPayment.js
```

### 4.4 GraphQL Query Patterns
**PATTERN:** Use descriptive query names and consistent structure

```javascript
const data = useStaticQuery(graphql`
  query PricesAndPaymentQuery {  // Descriptive name
    content: allPricesAndPaymentYaml {
      edges {
        node {
          fields { lang }
          // List all needed fields explicitly
          job_guarantee_locations
          job_guarantee {
            slug
            academies
            title
            monthly_label
          }
        }
      }
    }
  }
`);
```

---

## üéì 5. 4GEEKSACADEMY CONTEXT

### 5.1 Business Model Understanding
**GLOBAL PRESENCE:** International coding bootcamp with 20+ locations
- **USA:** Atlanta, Austin, Chicago, Dallas, Houston, LA, NYC, Miami, Orlando, Tampa, Toronto
- **LATAM:** Buenos Aires, Bogot√°, Caracas, Costa Rica, La Paz, Lima, Mexico City, Montevideo, Panama, Quito  
- **EUROPE:** Madrid, Barcelona, Valencia, M√°laga, Berlin, Dublin, Hamburg, Munich, Lisbon, Milan, Rome

### 5.2 Pricing Strategy Variations
**DIFFERENT MODELS BY REGION:**

```yaml
# USA: Higher prices, job guarantee available
price: "$13,499"
job_guarantee_description: "Regular tuition is $12,999..."

# LATAM: USD pricing, different financing
price: "USD $3.600" 
financing: "Financing available"

# Europe: Euro pricing, different regulations
price: "‚Ç¨4,750*"
financing: "SEPA financing available"
```

### 5.3 Job Guarantee Program
**AVAILABILITY VARIES:** Not all locations offer job guarantee

```yaml
# Job guarantee enabled locations
job_guarantee_locations: [
  "atlanta-usa", "austin-usa", "chicago-usa", "dallas-usa",
  "houston-usa", "losangeles-usa", "newyork-usa", "toronto-canada",
  "buenosaires-argentina", "bogota-colombia", "caracas-venezuela",
  "costa-rica", "lapaz-bolivia", "lima-peru", "mexicocity-mexico",
  "montevideo-uruguay", "panamacity-panama", "quito-ecuador"
]
# NOTE: Chile and Europe excluded due to local regulations
```

### 5.4 Mobile-First Design
**PRIORITY:** Mobile experience is critical (60%+ mobile traffic)

```javascript
// Always consider mobile-first responsive design
<Div
  display="none"           // Hidden on mobile
  display_md="block"       // Shown on desktop
>
  Desktop content
</Div>

<Div
  display="block"          // Shown on mobile  
  display_md="none"        // Hidden on desktop
>
  Mobile content
</Div>
```

### 5.5 Multilingual Requirements
**SUPPORTED LANGUAGES:**
- **English (US):** Primary language for US/Canada markets
- **Spanish (ES):** Primary language for LATAM/Spain markets

**TRANSLATION GUIDELINES:**
- Maintain technical accuracy across languages
- Use informal tone ("t√∫" form in Spanish)
- Preserve component structure between languages
- Keep marketing messages culturally appropriate

---

## üîß 6. DEVELOPMENT WORKFLOW

### 6.1 Step-by-Step Process
1. **üìã Plan:** Break complex changes into small steps
2. **üèóÔ∏è YAML First:** Update configuration files  
3. **üîç GraphQL:** Update queries to match new YAML structure
4. **‚öõÔ∏è Component:** Update React component logic
5. **üß™ Test:** Run `npm run test` after each step
6. **üìù Commit:** Small, focused commits with clear messages
7. **üîÑ Iterate:** Repeat until feature is complete

### 6.2 Code Review Checklist
- [ ] Both `.us.yml` and `.es.yml` files updated
- [ ] GraphQL queries include all new YAML fields
- [ ] Component logic handles undefined/null values gracefully
- [ ] Regional filtering uses selected academy, not visitor origin
- [ ] All tests pass (`npm run test`)
- [ ] Commit messages follow project standards
- [ ] Mobile and desktop rendering tested

### 6.3 Debugging Guide
**COMMON DEBUG POINTS:**
1. **Data not appearing:** Check GraphQL query includes the field
2. **Regional logic broken:** Verify academy-based filtering
3. **Spanish page errors:** Check both language files have matching keys
4. **Toggle not working:** Ensure state variables are passed to child components

---

## üöÄ 7. PERFORMANCE & OPTIMIZATION

### 7.1 GraphQL Optimization
**ONLY FETCH NEEDED DATA:** Don't request unused fields

```javascript
// BAD: Fetching everything
allPlansYaml {
  edges {
    node {
      full_time  // Fetches all fields
    }
  }
}

// GOOD: Explicit field selection
allPlansYaml {
  edges {
    node {
      full_time {
        slug
        academies  
        description
        price
        // Only what you need
      }
    }
  }
}
```

### 7.2 Component Rendering
**AVOID:** Unnecessary re-renders and complex calculations in render

```javascript
// BAD: Complex calculation in render
{availablePlans.filter(plan => 
  plan.academies.includes(location) && plan.price > 0
).map(plan => ...)}

// GOOD: Pre-calculate in useEffect
useEffect(() => {
  const filtered = availablePlans.filter(plan => 
    plan.academies.includes(currentLocation) && plan.price > 0
  );
  setFilteredPlans(filtered);
}, [availablePlans, currentLocation]);
```

---

## üìö 8. RESOURCES & REFERENCES

### 8.1 Key Files to Study
- `src/components/AdmissionsStaff/index.js` - Location filtering pattern
- `src/components/PricesAndPayment/index.js` - Complex regional logic
- `src/data/components/prices_and_payment/` - Regional YAML structure
- `src/test/` - Testing patterns and validation

### 8.2 External Dependencies
- **Gatsby:** Static site generation and GraphQL
- **React:** Component framework
- **Styled Components:** CSS-in-JS styling
- **React Select:** Dropdown components

### 8.3 Testing Commands
```bash
npm run test              # Full test suite
npm run develop          # Development server
npm run build            # Production build
npm run serve            # Serve built site
```

---

## üèóÔ∏è 9. DYNAMIC COMPONENT ARCHITECTURE

### 9.1 YAML-Driven Component Architecture
**CRITICAL PATTERN:** Dynamic components driven by YAML configuration must be rendered directly without extra wrappers to maintain responsive behavior and preserve the configuration-first approach.

```javascript
// ‚ùå INCORRECT: Adding wrapper divs breaks mobile responsiveness
{landingSections.map((name, index) => (
  <Div margin="20px 0" margin_md="40px 0">
    {landingSections[layout]({ ...props })}
  </Div>
))}

// ‚úÖ CORRECT: Direct rendering preserves responsive layout
{landingSections.map((name, index) => 
  landingSections[layout]({ ...props })
)}
```

**WHY THIS MATTERS:**
1. Each YAML-configured component manages its own responsive layout and behavior
2. Extra wrapper divs interfere with the intended configuration-driven design
3. Components need direct block-level flow to maintain YAML-defined structure
4. Preserves the separation between configuration (YAML) and presentation (React)

**IMPLEMENTATION REQUIREMENTS:**
1. Always render dynamic components directly from their YAML configuration
2. Let each component control its own margins/spacing via YAML props
3. Use mobile-first props defined in the component's YAML schema
4. Test all breakpoints after template changes
5. Maintain clear separation between YAML configuration and component implementation

### 9.2 Dynamic Template Migration Best Practices
**PATTERN:** When migrating or creating new templates with dynamic components, use landing_a.js as the reference implementation for YAML-driven architecture.

**MIGRATION CHECKLIST:**
- [ ] Remove any wrapper Divs around landingSections output
- [ ] Verify mobile-first props in template layout
- [ ] Test responsive behavior matches landing_a.js
- [ ] Validate section spacing/stacking on mobile
- [ ] Check for overlapping components at all breakpoints

**COMMON PITFALLS:**
1. Adding margin/padding wrappers around sections
2. Overriding section's built-in responsive behavior
3. Not testing all breakpoints during migration
4. Missing mobile-first props in template layout

### 9.3 YAML-Driven Component Architecture
**PRINCIPLE:** Components must handle their own responsive behavior through YAML configuration without external wrappers.

```yaml
# ‚ùå INCORRECT: Adding wrapper component with hardcoded responsive values
components:
  - name: feature_section
    layout: two_column
    wrapper:
      margin: "20px 0"
      margin_md: "40px 0"

# ‚úÖ CORRECT: Component defines its own responsive layout via YAML
components:
  - name: feature_section
    layout: two_column
    margin_xs: "10px 0"
    margin_sm: "20px 0"
    margin_md: "40px 0"
    heading:
      text: "Feature Title"
      font_size: ["40px", "34px", "30px", "24px", "20px"] # [xl, lg, md, sm, xs]
```

**YAML-DRIVEN RESPONSIVE PATTERN:**
- Use consistent breakpoint suffixes (`_xs`, `_sm`, `_md`, `_lg`) in YAML
- Define responsive arrays in YAML for font sizes and spacing
- Let YAML configuration control component layout/behavior
- Avoid wrapper components that override YAML-defined responsive props
- Test all breakpoints with different YAML configurations

## ‚ö†Ô∏è 10. CRITICAL REMINDERS

1. **ALWAYS** update both `.us.yml` and `.es.yml` files
2. **NEVER** forget to update GraphQL queries when adding YAML keys
3. **TEST** thoroughly after YAML or GraphQL changes
4. **USE** selected academy for regional logic, not visitor origin
5. **FOLLOW** commit message conventions (PREFIX: Description)
6. **MAINTAIN** mobile-first responsive design
7. **CONSIDER** all regions when adding new features
8. **VALIDATE** with `npm run test` before committing
9. **NEVER** wrap YAML-driven components in extra container divs
10. **ALWAYS** test responsive behavior on all breakpoints
11. **MAINTAIN** separation between YAML configuration and component implementation
12. **FOLLOW** the configuration-first principle for all dynamic components

---

**üéØ Remember:** This is an international project serving students worldwide. Every change should work seamlessly across all regions, languages, and devices. When in doubt, follow established patterns and test thoroughly.

**üìñ Version History:**
- v1.0 (2024): Initial project patterns
- v2.0 (2025): Regional refactoring and comprehensive guide
- v2.1 (2025): Added dynamic section architecture guidelines